!function(e){"use strict";function o(){var e=u[Math.floor(Math.random()*u.length)];l.intro.find("p.credit").empty(),l.intro.find("blockquote").empty().shuffleText(e.quote,{complete:function(){l.intro.find("blockquote").text(e.quote),l.intro.find("p.credit").empty().shuffleText("â€”"+e.author)}})}function t(){var t=new ScrollMagic.Controller,n=[],r=0,i=a.height-r;g.intro=new ScrollMagic.Scene({duration:i,triggerElement:l.intro[0],triggerHook:1}).on("enter",function(){d=setInterval(function(){o()},25e3),s&&clearTimeout(s),s=setTimeout(function(){h.setRoute("/")},400)}).on("leave",function(){d&&clearInterval(d),s&&clearTimeout(s)}),g["intro-tween"]=new ScrollMagic.Scene({duration:i,triggerElement:l.intro[0],triggerHook:0}).on("progress",function(e){l.intro.find(".content").css("top",i*e.progress+"px")});return l.sections.each(function(o,t){if(0!==o){var r=TweenMax.fromTo(e(t).find(".blurb"),1,{y:"30%",opacity:0},{y:"0%",opacity:1});g["pin-"+o]=new ScrollMagic.Scene({duration:1.75*i,triggerElement:t,triggerHook:0,offset:-50}).setPin(t).on("enter",function(){clearTimeout(s),c.isMore||(s=setTimeout(function(){var o=e(t).data("slug")||"/";h.setRoute(o)},400))}).on("leave",function(){clearTimeout(s)}),g["blurb-tween-"+o]=new ScrollMagic.Scene({duration:.65*i,triggerElement:t,triggerHook:.5}).setTween(r),g["background-tween-"+o]=new ScrollMagic.Scene({duration:i,triggerElement:t,triggerHook:1,offset:-50}).on("progress",function(n){e(t).find("[data-background]").css("top",i*n.progress-i+"px"),"FORWARD"===n.scrollDirection&&l.sections.eq(o-1).find("[data-background]").css("top",i*n.progress-50+"px")}),g["background-leave-"+o]=new ScrollMagic.Scene({duration:i,triggerElement:t,triggerHook:1}).on("progress",function(e){"REVERSE"===e.scrollDirection&&l.sections.eq(o-1).find("[data-background]").css("top",i*e.progress+"px")}),n.push(g["pin-"+o]),n.push(g["blurb-tween-"+o]),n.push(g["background-tween-"+o]),n.push(g["background-leave-"+o])}}),n.push(g.intro),n.push(g["intro-tween"]),t.addScene(n),t}function n(o){var t="https://mandrillapp.com/api/1.0/messages/send.json",n="mCojUuaY1GeKR0DGzZOf8g",r="hello@grandioseinc.com",a={key:n,message:{from_email:o.email,to:[{email:r,name:o.name,type:"to"}],autotext:"true",subject:"[Hello] from "+o.name,html:o.body+"<br><br>"+o.email}};e.post(t,a,function(){var a={key:n,message:{from_email:r,to:[{email:o.email,name:"Grandiose, inc.",type:"to"}],autotext:"true",subject:"Hello "+o.name,html:"Hello "+o.name+",<br><br>Thank you for contacting Grandiose. We just wanted to let you know that we recieved your email. We will have someone contact you shortly."}};l.contact.addClass("sent"),e.post(t,a,function(){})}).fail(function(){l.contact.removeClass("sent"),alert("There was an Error sending your email. Please try contacting us via email hello@grandioseinc.com instead.")})}window.breakpoints={xs:[0,320],sm:[321,639],md:[640,959],lg:[960,3200]};var r,a=e(window),i=e({}),s=!1,c={};a.height=a.height(),i.on("close-more",function(){c.isMore=!1,l.header.removeClass("invert"),l.body.removeClass("noscroll"),l.sections.removeClass("view-more"),l.contact.removeClass("sent"),l.contact.find("form")[0].reset()});var l={body:e("body"),container:e("#container"),header:e("header"),navItems:e("nav a"),sections:e("section"),intro:e("section.intro"),contact:e("section.contact")},u=[{quote:"One machine can do the work of fifty ordinary men. No machine can do the work of one extraordinary man.",author:"Elbert Hubbard"},{quote:"Design has allowed us to stand out; to look different and show that difference boldy.",author:"Joe Mansueto"},{quote:"What new technology does is create new opportunities to do a job that customers want done.",author:"Tim O'Reilly"},{quote:"Something must have form to be seen but must make sense to be understood and used.",author:"Klaus Krippendorff"},{quote:"Design must reflect the practical and aesthetic in business but above all... good design must primarily serve people.",author:"Thomas Watson, Jr., IBM"},{quote:"Design must seduce, shape, and perhaps more importantly, evoke an emotional response.",author:"April Greiman"}];e("[data-background]").each(function(o,t){e(t).css("background-image","url("+e(this).attr("data-background")+")")}),a.on("resize orientationchange",function(){l.sections.css("min-height",a.height-50),l.intro.find(".content").css("height",a.height-70)}).trigger("resize"),a.on("scroll",function(){r=a.scrollTop(),r>a.height?l.container.addClass("header-pin"):r<=a.height&&l.container.removeClass("header-pin")}),a.on("keyup",function(e){var o=e.keyCode||e.which;switch(o){case 27:h.setRoute(h.getRoute(0))}}),l.sections.find(".nano").nanoScroller();var d,f=!1,g={};l.sections.on("click",".btn-toggle-next",function(){if(window.location.hash){var e=window.location.hash.substring(1);h.setRoute(e)}}),l.sections.on("click",".btn-close",function(o){var t=e(o.delegateTarget);h.setRoute(t.data("slug"))}),l.contact.find("form").validetta({errorTemplateClass:"error-bubble",errorClass:"error",onValid:function(o){o.preventDefault();for(var t={},r=0,a=e(this.form).serializeArray();r<a.length;r++)t[a[r].name]=a[r].value;n(t)},onError:function(e){e.preventDefault()}});var m=null,h=new Router({"/":{on:function(e){e||(i.trigger("close-more"),m=TweenLite.to(window,.5,{scrollTo:0}),l.navItems.filter(".active").removeClass("active"))}},"/:section":{"/:more":{on:function(e){clearTimeout(s);var o=l.sections.filter('[data-slug="/'+e+'"]');m.vars.onComplete=function(){c.isMore=!0,l.header.addClass("invert"),l.body.addClass("noscroll"),o.toggleClass("view-more")}}},on:function(e){clearTimeout(s),i.trigger("close-more"),l.navItems.filter(".active").removeClass("active").andSelf().filter('a[href="#/'+e+'"]').addClass("active");var o=l.sections.filter('[data-slug="/'+e+'"]'),t=o.offset().top,n=Math.abs((t-r)/a.height*.35);m=TweenLite.to(window,n+.15,{scrollTo:{y:t-50},ease:Power1.easeInOut,delay:.15})}}}).configure({recurse:"forward"}),p=new Router({"/:section/:more/:heading":{on:function(e,o,t){var n=l.sections.filter('[data-slug="/'+e+'"]');n.find(".side-nav a.active").removeClass("active"),n.find('.side-nav a[href="#/'+e+"/"+o+"/"+t+'"]').addClass("active"),TweenLite.to(n.find("article"),.4,{scrollTo:{y:n.find('[data-slug="'+t+'"]').position().top},onComplete:function(){console.log("obj")}})}}}).configure({recurse:"backward"});window.addEventListener("breakpoint",function(e){switch(i.trigger("close-more"),o(),e.breakpoint){case"sm":case"md":f&&f.destroy(!0),l.sections.find(".blurb").removeAttr("style"),l.intro.find(".content").removeAttr("style");break;default:f=t()}},!1),Pace.once("done",function(){h.init(),p.init()})}(jQuery);