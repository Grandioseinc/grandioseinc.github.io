!function(e){"use strict";function t(){var e=l[Math.floor(Math.random()*l.length)];c.intro.find("p.credit").empty(),c.intro.find("blockquote").empty().shuffleText(e.quote,{complete:function(){c.intro.find("blockquote").text(e.quote),c.intro.find("p.credit").empty().shuffleText("â€”"+e.author)}})}function o(){var o,n=new ScrollMagic.Controller,r=[],i={},l=0,u=a.height-l;return i.intro=new ScrollMagic.Scene({duration:u,triggerElement:c.intro[0],triggerHook:1}).on("enter",function(){o=setInterval(function(){t()},25e3),s&&clearTimeout(s),s=setTimeout(function(){m.setRoute("/")},1500)}).on("leave",function(){o&&clearInterval(o),s&&clearTimeout(s)}),i["intro-tween"]=new ScrollMagic.Scene({duration:u,triggerElement:c.intro[0],triggerHook:0}).on("progress",function(e){c.intro.find(".content").css("top",u*e.progress+"px")}),c.sections.each(function(t,o){if(0!==t){var n=TweenMax.fromTo(e(o).find(".blurb"),1,{y:"20%",opacity:0},{y:"0%",opacity:1});i["pin-"+t]=new ScrollMagic.Scene({duration:.65*u,triggerElement:o,triggerHook:0,offset:-50}).setPin(o).on("enter",function(){clearTimeout(s),s=setTimeout(function(){var t=e(o).data("slug")||"/";m.setRoute(t)},600)}).on("leave",function(){clearTimeout(s)}),i["tween-"+t]=new ScrollMagic.Scene({duration:.5*u,triggerElement:o,triggerHook:1,offset:-50}).setTween(n),r.push(i["pin-"+t]),r.push(i["tween-"+t])}}),r.push(i.intro),r.push(i["intro-tween"]),n.addScene(r),n}function n(t){var o="https://mandrillapp.com/api/1.0/messages/send.json",n="mCojUuaY1GeKR0DGzZOf8g",r="hello@grandioseinc.com",a={key:n,message:{from_email:t.email,to:[{email:r,name:t.name,type:"to"}],autotext:"true",subject:"[Hello] from "+t.name,html:t.body+"<br><br>"+t.email}};e.post(o,a,function(){var a={key:n,message:{from_email:r,to:[{email:t.email,name:"Grandiose, inc.",type:"to"}],autotext:"true",subject:"Hello "+t.name,html:"Hello "+t.name+",<br><br>Thank you for contacting Grandiose. We just wanted to let you know that we recieved your email. We will have someone contact you shortly."}};c.contact.addClass("sent"),e.post(o,a,function(){})}).fail(function(){c.contact.removeClass("sent"),alert("There was an Error sending your email. Please try contacting us via email hello@grandioseinc.com instead.")})}window.breakpoints={xs:[0,320],sm:[321,639],md:[640,959],lg:[960,3200]};var r,a=e(window),i=e({}),s=!1;a.height=a.height(),i.on("close-more",function(){c.body.removeClass("noscroll"),c.sections.removeClass("view-more"),c.contact.removeClass("sent"),c.contact.find("form")[0].reset()});var c={body:e("body"),container:e("#container"),header:e("header"),navItems:e("nav a"),sections:e("section"),intro:e("section.intro"),contact:e("section.contact")},l=[{quote:"One machine can do the work of fifty ordinary men. No machine can do the work of one extraordinary man.",author:"Elbert Hubbard"},{quote:"Design has allowed us to stand out; to look different and show that difference boldy.",author:"Joe Mansueto"},{quote:"What new technology does is create new opportunities to do a job that customers want done.",author:"Tim O'Reilly"},{quote:"Something must have form to be seen but must make sense to be understood and used.",author:"Klaus Krippendorff"},{quote:"Design must reflect the practical and aesthetic in business but above all... good design must primarily serve people.",author:"Thomas Watson, Jr., IBM"},{quote:"Design must seduce, shape, and perhaps more importantly, evoke an emotional response.",author:"April Greiman"}];e("[data-background]").each(function(t,o){e(o).css("background-image","url("+e(this).attr("data-background")+")")}),a.on("resize orientationchange",function(){c.sections.css("min-height",a.height-50),c.intro.find(".content").css("height",a.height-70)}).trigger("resize"),a.on("scroll",function(){r=a.scrollTop(),r>a.height?c.container.addClass("header-pin"):r<=a.height&&c.container.removeClass("header-pin")}),a.on("keyup",function(e){var t=e.keyCode||e.which;switch(t){case 27:m.setRoute(m.getRoute(0))}});var u=!1;c.sections.on("click",".btn-toggle-next",function(){if(window.location.hash){var e=window.location.hash.substring(1);m.setRoute(e)}}),c.sections.on("click",".btn-close",function(t){var o=e(t.delegateTarget);m.setRoute(o.data("slug"))}),c.contact.find("form").validetta({errorTemplateClass:"error-bubble",errorClass:"error",onValid:function(t){t.preventDefault();for(var o={},r=0,a=e(this.form).serializeArray();r<a.length;r++)o[a[r].name]=a[r].value;n(o)},onError:function(e){e.preventDefault()}});var d=null,m=new Router({"/":{on:function(e){e||(i.trigger("close-more"),d=TweenLite.to(window,.5,{scrollTo:0}),c.navItems.filter(".active").removeClass("active"))}},"/:section":{"/:more":{on:function(e){var t=c.sections.filter('[data-slug="/'+e+'"]');d.vars.onComplete=function(){c.body.addClass("noscroll"),t.toggleClass("view-more")}}},on:function(e){clearTimeout(s),i.trigger("close-more"),c.navItems.filter(".active").removeClass("active").andSelf().filter('a[href="#/'+e+'"]').addClass("active");var t=c.sections.filter('[data-slug="/'+e+'"]'),o=t.offset().top,n=Math.abs((o-r)/a.height*.35);d=TweenLite.to(window,n,{scrollTo:{y:o-50}})}}}).configure({recurse:"forward"});window.addEventListener("breakpoint",function(e){switch(i.trigger("close-more"),t(),e.breakpoint){case"sm":case"md":u&&u.destroy(!0),c.sections.find(".blurb").removeAttr("style"),c.intro.find(".content").removeAttr("style");break;default:u=o()}},!1),Pace.once("done",function(){m.init()})}(jQuery);